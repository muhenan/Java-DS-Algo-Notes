[toc]

# æ ‘ Tree

![image-20220502182815068](6-JavaNote-Tree.assets/image-20220502182815068.png)

æ•°æ®ç»“æ„ä¸­æ‰€è°“çš„æ ‘ï¼Œæœ¬èº«å°±æ˜¯ä¸€ä¸ªé€’å½’ç»“æ„ï¼Œä¸€ä¸ªæ ‘æˆ–è€…æ˜¯ç©ºæ ‘ï¼Œæˆ–è€…æ˜¯æœ‰æŒ‡é’ˆæŒ‡ç€æ›´å°çš„æ ‘ï¼Œæ‰€ä»¥å¾ˆå¤šæ ‘çš„é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨é€’å½’æ¥å¤„ç†ã€‚

æ ‘è¿™ç§æ•°æ®ç»“æ„ä¸€èˆ¬ä¸ä¼šé€ æˆé‡å¤çš„æŸ¥æ‰¾ï¼Œæ‰€ä»¥è¿™é‡Œæš‚æ—¶ä¸ä¼šå¤ªè€ƒè™‘ dynamic programming ç›¸å…³çš„ memoization ç›¸å…³çš„äº‹ã€‚

å½“é‡å¤æŸ¥æ‰¾çš„æƒ…å†µå‡ºç°æ—¶ï¼Œè¦ä»æ•°çš„éå†æƒ…å†µè¿›è¡Œä¼˜åŒ–ï¼Œæˆ–è€…ä½¿ç”¨å›æº¯æ³•è¿›è¡Œä¼˜åŒ–ã€‚

é€’å½’ï¼Œrecursionï¼Œå³å‡½æ•°è‡ªå·±è°ƒç”¨è‡ªå·±ï¼Œcurve æ˜¯å¼¯æ›²çš„æ„æ€ï¼Œæˆ–è€…å‘å†…å·èµ·æ¥çš„æ„æ€ï¼Œå‰é¢åŠ  re å°±æ˜¯é‡å¤çš„å¼„ï¼Œå³ä¸€å±‚åˆåŒ…ç€å¦ä¸€å±‚ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°è‡ªå·±è°ƒç”¨è‡ªå·±ï¼Œç±»ä¼¼äº $$f(f(x))$$

æˆ‘ç†è§£çš„é€’å½’ï¼Œæ³¨é‡è¿‡ç¨‹ï¼Œç›¸ä¿¡è¿‡ç¨‹ï¼ŒæŠŠç»“æœäº¤ç»™è¿‡ç¨‹ã€‚

## Leetcode 104 æ ‘çš„é«˜åº¦

æ ‘çš„æœ€å¤§æ·±åº¦

```java
/**
 * æœ€ç»å…¸çš„ä¸€ä¸ªé¢˜ç›®ï¼Œæ ‘çš„æœ€å¤§æ·±åº¦ï¼Œæˆ–è€…è¯´æ ‘çš„é«˜åº¦
 * ä¼ ç»Ÿçš„é€’å½’æ€æƒ³
 * æˆ‘å°†é€’å½’æ€æƒ³æ€»ç»“ä¸ºï¼šå°†å¤æ‚é—®é¢˜çš„è§£ä¸¢ç»™é€’å½’å‡½æ•°ï¼Œåªè¿½æ±‚è¿‡ç¨‹é—´çš„é€»è¾‘
 * */
    public int maxDepth(TreeNode root) {
        if (root == null) return 0; // è¿™é‡Œæœ€å¥½å†™ç©ºæ ‘çš„æ—¶å€™è¿”å›0ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥ä¿è¯èµ°åˆ°æœ€å
        return Math.max(maxDepth(root.left), maxDepth(root.right)) + 1;
    }
```

## Leetcode 110 å¹³è¡¡æ ‘

åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦æ˜¯å¹³è¡¡æ ‘ï¼Œå¹³è¡¡æ ‘ä»»ä½•å­æ ‘çš„å·¦å³å­æ ‘é«˜åº¦å·®éƒ½å°äºç­‰äº 1ã€‚

```java
/**
 * ç¬¬ä¸€ååº”ï¼šå¦‚æœé…åˆæœ€å¤§æ·±åº¦çš„å‡½æ•°æ¥è§£é¢˜çš„è¯ï¼Œå¦‚æœæ˜¯åˆ†å¼€ç”¨ä¸¤ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´é‡å¤æŸ¥æ‰¾
 * æ‰¾äº†ä¹‹å‰çš„ä»£ç ï¼Œåªè¦æŠŠåˆ¤æ–­å¹³è¡¡è¿™æ­¥åŠ åˆ°æœ€å¤§æ·±åº¦å‡½æ•°ä¸­å³å¯
 * è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªåç›¸çš„æ€ç»´ï¼š
 *     å³æ‰¾åä¾‹
 *     æ‰¾æ˜¯å¹³è¡¡äºŒå‰æ ‘ä¸å¥½æ‰¾ï¼Œé‚£å°±æ‰¾éå¹³è¡¡äºŒå‰æ ‘ï¼Œå‘ç°ä¸æ˜¯å°±è¿”å›
 * è¯¥é¢˜å…¶å®æ˜¯å‰é¢æœ€å¤§æ·±åº¦å‡½æ•°çš„å˜å½¢ï¼Œåªè¦åœ¨æœ€å¤§æ·±åº¦å‡½æ•°ä¸­æ¯ä¸ªèŠ‚ç‚¹éƒ½å»åˆ¤æ–­æ˜¯å¦å¹³è¡¡å³å¯
 * */
    private boolean result = true; // ç”¨ä¸€ä¸ªå…¨å±€å˜é‡ result è¡¨ç¤ºç»“æœï¼Œè¯¥å˜é‡åˆå§‹åŒ–ä¸º trueï¼Œæ‰¾åˆ°åä¾‹å˜æˆ false
    public boolean isBalanced(TreeNode root) {
        isBalancedMaxDepth(root);
        return result;
    }
    private int isBalancedMaxDepth(TreeNode root) { //ä¸»è¦å°±æ˜¯è¿™ä¸ªå‡½æ•°ï¼Œè¿™æ˜¯max depthçš„å˜å½¢ï¼ŒåŠ äº†å¹³è¡¡çš„åˆ¤æ–­
        if (root == null) return 0;
        int depthOfLeft = isBalancedMaxDepth(root.left);
        int depthOfRight = isBalancedMaxDepth(root.right);
        if (Math.abs(depthOfLeft - depthOfRight) > 1) result = false;
        return Math.max(depthOfLeft, depthOfRight) + 1;
    }
```

>å½“ä¸€ä¸ªé—®é¢˜ä»æ­£é¢ä¸å¥½å…¥æ‰‹æ—¶è¦æœ‰åç›¸çš„æ€ç»´ï¼Œä»¥é€€ä¸ºè¿›

## Leetcode 543 äºŒå‰æ ‘çš„ç›´å¾„ï¼Œæˆ–è€…å«æœ€é•¿è·¯å¾„

æ³¨æ„ï¼šè¿™ä¸ªè·¯å¾„ä¸ä¸€å®šç»è¿‡æ ¹èŠ‚ç‚¹ï¼Œå³åªè¦æ˜¯äºŒå‰æ ‘çš„ä¸€ä¸ªè·¯å¾„å°±è¡Œ

```java
/**
 * æˆ‘è®¤ä¸ºä¾æ—§æ˜¯æœ€å¤§æ·±åº¦çš„å˜å½¢ï¼Œåªæ˜¯è¿™æ¬¡è¦åœ¨æ¯ä¸ªèŠ‚ç‚¹åŠ ä¸Šç»Ÿè®¡å·¦å³æ ‘æ·±åº¦ç›¸åŠ çš„å€¼
 * å¹¶ä¸”è®°å½•è¿™ä¸ªå€¼çš„æœ€å¤§å€¼
 * */
 
    private int diameter = 0; // å…³äºè¿™ç§è®°å½•çš„é—®é¢˜ï¼Œä¾æ—§ä½¿ç”¨ä¸€ä¸ªå…¨å±€å˜é‡æ¥è®°å½•
    public int diameterOfBinaryTree(TreeNode root) {
        maxDepth(root);
        return diameter;
    }
    private int maxDepth(TreeNode root) {
        if (root == null) return 0;
        int depthOfLeft = maxDepth(root.left);
        int depthOfRight = maxDepth(root.right);
        diameter = Math.max(diameter, depthOfLeft + depthOfRight);
        return Math.max(depthOfLeft, depthOfRight) + 1;
    }
```

ä¸»è¦çš„æ“ä½œè¿˜æ˜¯åœ¨ç»™ maxDepth åŠ äº†ä¸€äº›é¢å¤–æ“ä½œã€‚

## Leetcode 226 ç¿»è½¬æ ‘

```java
/**
 * ç»å…¸é¢˜ç›®
 * å¯¹äºæ¯ä¸€ä¸ªå°çš„å­ç»“æ„ï¼Œè¿™é‡Œæˆ‘æ‰€è¯´çš„å­ç»“æ„æŒ‡çš„æ˜¯åªæœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹å’Œä¸¤ä¸ªå­èŠ‚ç‚¹çš„å°ç»“æœ
 * ç¿»è½¬ï¼Œæ— éå°±æ˜¯è®©å…¶å·¦å³çš„æ ‘æ¢ä¸€ä¸‹ï¼Œè¿™å°±æ˜¯è¿‡ç¨‹ï¼Œè¿™å°±æ˜¯æ•´ä¸ªé—®é¢˜ä¸­ä¸€ä¸ªå°çš„é€šç”¨çš„è¿‡ç¨‹
 * å¦‚æœæ¯ä¸ªå°çš„å­ç»“æ„éƒ½èƒ½å®ç°è¿™æ ·çš„ç¿»è½¬ï¼Œé‚£ä¹ˆæ•´ä¸ªæ ‘å°†å¾—åˆ°ç¿»è½¬
 * */
    public TreeNode invertTree(TreeNode root) {
        if (root != null) {
            TreeNode newRight = invertTree(root.left);
            TreeNode newLeft = invertTree(root.right);
            root.left = newLeft;
            root.right = newRight;
        }
        return root;
    }
```

æˆ–è€…å¯ä»¥ç†è§£ä¸ºï¼Œè¿™ä¸ªå‡½æ•°çš„é€»è¾‘æ˜¯ï¼ŒåŒæ ·ç”¨è¿™ä¸ªå‡½æ•°ç¿»è½¬å·¦å³å­æ ‘åï¼Œå·¦å³å­æ ‘æ¢ä½ç½®ã€‚

## Leetcode 617 å½’å¹¶ä¸¤æ ‘

é¢˜ç›®è¦æ±‚ï¼š

```
Input:
       Tree 1                     Tree 2
          1                         2
         / \                       / \
        3   2                     1   3
       /                           \   \
      5                             4   7

Output:
         3
        / \
       4   5
      / \   \
     5   4   7
```

```java
/**
 * æ ‘ä¸­çš„é€’å½’ï¼šå¯¹äºå·¦å­æ ‘çš„äº‹ï¼Œå°†å·¦å­æ ‘å½“æˆæ–°æ ‘äº¤ç»™å‡½æ•°ï¼Œå³è¾¹äº¦ç„¶ï¼Œæˆ‘ä»¬åªæ³¨é‡å½“å‰è¿™ä¸ªèŠ‚ç‚¹çš„äº‹
 * */
    public TreeNode mergeTrees(TreeNode root1, TreeNode root2) {
        if (root1 == null) return root2;
        else if (root2 == null) return root1;
        else {
            root1.val += root2.val;
            root1.left = mergeTrees(root1.left, root2.left);
            root1.right = mergeTrees(root1.right, root2.right);
            return root1;
        }
    }
```

## Leetcode Path Sum 1,2,3

åœ¨è¯´è¿™ä¸‰é“é¢˜ç›®ä¹‹å‰ï¼Œé¦–å…ˆä»‹ç»ä¸€ä¸‹ Java è‡ªå¸¦çš„æ•°æ®ç»“æ„ Java Collection Framework èƒŒåçš„é€»è¾‘ï¼Œå³è¯´æ˜ä¸€äº›ä½¿ç”¨çš„è¯¯åŒºï¼š

# Java Collection Framework

Java çš„ util ä¸­è‡ªå¸¦æ•°æ®ç»“æ„ï¼Œä»¥ä¸‹ä¸ºJava util æ•°æ®ç»“æ„çš„å…³ç³»å›¾ã€‚

![image-20220504220714000](6-JavaNote-Tree.assets/image-20220504220714000.png)

å›¾ä¸­ç¼ºäº†ä¸€ä¸ªç±»ï¼Œè¿™é‡Œè¡¥å……ä¸€ä¸‹ï¼ŒStack ç±»ç»§æ‰¿ Vector ç±»ï¼Œä½†ç°åœ¨ Java å®˜æ–¹å·²ç»ä¸æ¨èç”¨ Stackï¼Œå¯ä»¥ç”¨ Deque ä»£æ›¿ã€‚

> å›¾æ¥è‡ªäºä¸€ä½æ·å…‹ğŸ‡¨ğŸ‡¿ç½‘å‹ï¼Œä¸¤ä¸ªå›¾ä¾‹çš„æ³¨è§£åŸä½œè€…å†™æˆäº†æ·å…‹è¯­ï¼Œç¬¬ä¸€ä¸ªè¯å’Œè‹±è¯­å¾ˆåƒå¯ä»¥çŒœåˆ°æ˜¯å®ç°çš„æ„æ€ï¼Œä»å›¾ä¸­ä¹Ÿå¯ä»¥çœ‹å‡ºæ˜¯ç±»å®ç°æ¥å£ï¼Œç¬¬äºŒä¸ªè¯ç»æŸ¥é˜…åå¾—åˆ°æ˜¯ç»§æ‰¿çš„æ„æ€ï¼Œå³ç±»ä¹‹é—´çš„ç»§æ‰¿ã€‚

## ArrayList å’Œ LinkedList

ArrayListå’ŒLinkedListéƒ½å®ç°äº†Listæ¥å£ï¼Œæœ‰ä»¥ä¸‹çš„ä¸åŒç‚¹ï¼š 

1ã€ArrayListæ˜¯åŸºäºç´¢å¼•çš„æ•°æ®æ¥å£ï¼Œå®ƒçš„åº•å±‚æ˜¯æ•°ç»„ã€‚å®ƒå¯ä»¥ä»¥O(1)æ—¶é—´å¤æ‚åº¦å¯¹å…ƒç´ è¿›è¡Œéšæœºè®¿é—®ã€‚ä¸æ­¤å¯¹åº”ï¼ŒLinkedListæ˜¯ä»¥å…ƒç´ åˆ—è¡¨çš„å½¢å¼å­˜å‚¨å®ƒçš„æ•°æ®ï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½å’Œå®ƒçš„å‰ä¸€ä¸ªå’Œåä¸€ä¸ªå…ƒç´ é“¾æ¥åœ¨ä¸€èµ·ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒæŸ¥æ‰¾æŸä¸ªå…ƒç´ çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ã€‚
2ã€ç›¸å¯¹äºArrayListï¼ŒLinkedListçš„æ’å…¥ï¼Œæ·»åŠ ï¼Œåˆ é™¤æ“ä½œé€Ÿåº¦æ›´å¿«ï¼Œå› ä¸ºå½“å…ƒç´ è¢«æ·»åŠ åˆ°é›†åˆä»»æ„ä½ç½®çš„æ—¶å€™ï¼Œä¸éœ€è¦åƒæ•°ç»„é‚£æ ·é‡æ–°è®¡ç®—å¤§å°æˆ–è€…æ˜¯æ›´æ–°ç´¢å¼•ã€‚
3ã€LinkedListæ¯”ArrayListæ›´å å†…å­˜ï¼Œå› ä¸ºLinkedListä¸ºæ¯ä¸€ä¸ªèŠ‚ç‚¹å­˜å‚¨äº†ä¸¤ä¸ªå¼•ç”¨ï¼Œä¸€ä¸ªæŒ‡å‘å‰ä¸€ä¸ªå…ƒç´ ï¼Œä¸€ä¸ªæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚

### å…³äº LinkedList çš„ removeLast()

å¯¹äºè¿™äº›å‡½æ•°ä½¿ç”¨æ¯”è¾ƒè¿·æƒ‘çš„åœ°æ–¹ï¼Œè¦å»æŸ¥é˜…Javaçš„å®˜æ–¹æ–‡æ¡£ï¼Œå…»æˆå¥½çš„ä¹ æƒ¯ã€‚å…³äºè¿™ä¸ªå‡½æ•°ï¼ŒJavaæŒ‡å®šäº†Dequeæ—¶æ‰èƒ½ä½¿ç”¨ï¼Œå®˜æ–¹æ–‡æ¡£çš„åŸæ–‡å¦‚ä¸‹ï¼š

![image-20220504222728723](6-JavaNote-Tree.assets/image-20220504222728723.png)

### å…³äº LinkedList ä¹‹é—´çš„æ·±æ‹·è´

ç”¨ new LinkedList(oldOne) å³å¯ã€‚

## Deque

Dequeæ˜¯â¼€ä¸ªåŒç«¯é˜Ÿåˆ—æ¥â¼ï¼Œç»§æ‰¿â¾ƒQueueæ¥â¼ï¼ŒDequeçš„å®ç°ç±»æ˜¯LinkedListã€ArrayDequeã€LinkedBlockingDequeï¼Œå…¶ä¸­
LinkedListæ˜¯æœ€å¸¸â½¤çš„ã€‚
Dequeæœ‰ä¸‰ç§â½¤é€”ï¼š

```java
æ™®é€šé˜Ÿåˆ—(â¼€ç«¯è¿›å¦â¼€ç«¯å‡º):
	Queue queue = new LinkedList() æˆ– Deque deque = new LinkedList()

åŒç«¯é˜Ÿåˆ—(ä¸¤ç«¯éƒ½å¯è¿›å‡º)
  Deque deque = new LinkedList()

å †æ ˆ
  Deque deque = new LinkedList()
```

> æ³¨æ„ï¼šJavaå †æ ˆStackç±»å·²ç»è¿‡æ—¶ï¼ŒJavaå®˜â½…æ¨èä½¿â½¤Dequeæ›¿ä»£Stackä½¿â½¤ã€‚Dequeå †æ ˆæ“ä½œâ½…æ³•ï¼špush()ã€pop()ã€peek()ã€‚

åç§° deque æ˜¯â€œdouble ended queueï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰â€çš„ç¼©å†™ï¼Œé€šå¸¸è¯»ä¸ºâ€œdeckâ€ã€‚

## Set

å³é›†åˆçš„æ„æ€ï¼Œå·²ç»æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„æ•°æ®ç±»å‹ï¼Œåœ¨å“ˆå¸Œç±»çš„é¢˜ç›®ä¸­æœ‰æ—¶ä¼šä½¿ç”¨ï¼Œæ¥å£å†™ Setï¼Œå®ç°å†™ HashSetã€‚

## Map

å…³äºMap å­—å…¸ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„æ–¹å¼æ˜¯æ¥å£å†™ Mapï¼Œå®ç°å†™ HashMapã€‚

# Path Sum

## Path Sum 1

ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root å’Œä¸€ä¸ªè¡¨ç¤ºç›®æ ‡å’Œçš„æ•´æ•° targetSum ã€‚åˆ¤æ–­è¯¥æ ‘ä¸­æ˜¯å¦å­˜åœ¨ æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹ çš„è·¯å¾„ï¼Œè¿™æ¡è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹å€¼ç›¸åŠ ç­‰äºç›®æ ‡å’Œ targetSum ã€‚å¦‚æœå­˜åœ¨ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚

```java
/**
 * Path Sum 1
 * å¾€ä¸‹æ‰¾å³å¯ï¼Œæ‰¾åˆ°çš„åˆ¤æ–­æ ‡å‡†æ˜¯ï¼Œåˆšå¥½ç­‰äº target numberï¼Œå¹¶ä¸”æ˜¯å¶å­èŠ‚ç‚¹
 * */
public boolean hasPathSum(TreeNode root, int targetSum) {
    if (root == null) return false; // ç›´æ¥æ˜¯ç©ºï¼Œä¸€èˆ¬ç”¨äºç›´æ¥è¾“å…¥äº†ç©ºæ ‘
    else if (root.val == targetSum && root.left == null && root.right == null) return true; // åˆšå¥½æ‰¾åˆ°
    else { // ç»§ç»­å¾€ä¸‹æ‰¾
        return hasPathSum(root.left, targetSum - root.val) || hasPathSum(root.right, targetSum - root.val);
    }
}
// ä¸»è¦æ˜¯å®¡é¢˜ï¼Œè¿™é‡Œè¯´äº†æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹æ‰ç®—ä¸€ä¸ªè·¯å¾„ï¼Œæ²¡æœ‰è½¬å¼¯çš„æƒ…å†µï¼Œè¯´æ˜é¢˜ç›®é¢˜ç›®ç»™çš„å·²ç»éå¸¸ç®€å•äº†
// æ³¨æ„ val æœ‰æ­£æœ‰è´Ÿ
```

![image-20220504223802565](6-JavaNote-Tree.assets/image-20220504223802565.png)

## Path Sum 2

ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å’Œ targetSum ï¼Œæ‰¾å‡ºæ‰€æœ‰ ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹ è·¯å¾„æ€»å’Œç­‰äºç»™å®šç›®æ ‡å’Œçš„è·¯å¾„ã€‚

å¶å­èŠ‚ç‚¹ æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚

```java
/**
 * Path Sum 2
 * ç»Ÿè®¡æ‰€æœ‰ç­‰äº target number çš„è·¯å¾„ï¼Œå¹¶ä¸”è¦è®°å½•è·¯å¾„
 *
 * å…¶å®è§£é¢˜çš„é€»è¾‘å€’ä¸æ˜¯å¾ˆéš¾
 * è¿™é‡Œæ¯”è¾ƒå¤æ‚çš„æ“ä½œå°±æ˜¯ Java çš„å„ç§æ•°æ®ç»“æ„çš„è½¬æ¢
 *
 * è§£é¢˜çš„è¯ï¼Œåœ¨ 1 çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬ä¼ é€’ä¸€ä¸ª LinkedListï¼Œæ³¨æ„åªä¼ é€’è¿™ä¸€ä¸ª LinkedList
 * é€šè¿‡åœ¨ä¸åŒåœ°æ–¹æ—¶å¢å‡ val æ¥ä¿è¯åªç”¨è¿™ä¸€ä¸ª LinkedList å°±å¯ä»¥æ¨¡æ‹Ÿæ‰€æœ‰çš„æƒ…å†µ
 *
 * æ¯å½“æ‰¾åˆ°ä¸€ä¸ªæ­£ç¡®çš„åºåˆ—æ—¶ï¼Œæ·±æ‹·è´è¿™ä¸ª LinkedListï¼Œä¿å­˜åˆ°æœ€ç»ˆç»“æœä¸­
 * */
List<List<Integer>> resultList = new LinkedList<>();
Deque<Integer> mylist = new LinkedList<>();
public List<List<Integer>> pathSum2(TreeNode root, int targetSum) {
    pathSumWithList(root, targetSum, mylist);
    return resultList;
}
private void pathSumWithList(TreeNode root, int targetSum, Deque<Integer> mylist) {
    if (root == null) return;
    else if (root.val == targetSum && root.left == null && root.right == null) { // æ‰¾åˆ°äº†
        mylist.add(root.val);
        resultList.add(new ArrayList<>(mylist));
        mylist.removeLast(); // ç”¨å®Œä¹‹å remove last
        return;
    } else {
        mylist.add(root.val);
        pathSumWithList(root.left, targetSum - root.val, mylist); // å¾€å·¦æ ‘æ‰¾
        pathSumWithList(root.right, targetSum - root.val, mylist); // å¾€å³æ ‘æ‰¾
        mylist.removeLast();
        return;
    }
}
```

å‘ä¸‹æ‰¾çš„é€»è¾‘å…¶å®å°±æ˜¯DFSæ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œæˆ–è€…è¯´å…ˆåºéå†ï¼Œç”¨è¿™æ ·çš„èµ°æ³•æ¨¡æ‹Ÿæ‰€æœ‰æƒ…å†µï¼›è¿˜æœ‰ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œé€šè¿‡æŒ‰ä¸€å®šé¡ºåºå¢å‡å…ƒç´ ï¼Œåªç”¨ä¸€ä¸ª LinkedList å°±å¯ä»¥æ¨¡æ‹Ÿæ‰€æœ‰æƒ…å†µäº†ã€‚

> è¿™é‡Œå¼•å‘ä¸€ä¸ªæ€è€ƒï¼Œæœ‰æ—¶é—´å¯ä»¥æ·±å…¥ç ”ç©¶ä¸€ä¸‹å›æº¯æ³•

## Path Sum 3

> æœ‰ä¸€äº›éš¾åº¦çš„é¢˜ç›®ï¼Œé‡ç‚¹ç†è§£å‰ç¼€å’Œçš„æ„ä¹‰

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œå’Œä¸€ä¸ªæ•´æ•° targetSum ï¼Œæ±‚è¯¥äºŒå‰æ ‘é‡ŒèŠ‚ç‚¹å€¼ä¹‹å’Œç­‰äº targetSum çš„ è·¯å¾„ çš„æ•°ç›®ã€‚

è·¯å¾„ ä¸éœ€è¦ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œä¹Ÿä¸éœ€è¦åœ¨å¶å­èŠ‚ç‚¹ç»“æŸï¼Œä½†æ˜¯è·¯å¾„æ–¹å‘å¿…é¡»æ˜¯å‘ä¸‹çš„ï¼ˆåªèƒ½ä»çˆ¶èŠ‚ç‚¹åˆ°å­èŠ‚ç‚¹ï¼‰ã€‚

![image-20220521162630403](6-JavaNote-Tree.assets/image-20220521162630403.png)

```java
 /**
     * Path Sum 3
     *
     * ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ rootï¼Œå’Œä¸€ä¸ªæ•´æ•° targetSum ï¼Œæ±‚è¯¥äºŒå‰æ ‘é‡ŒèŠ‚ç‚¹å€¼ä¹‹å’Œç­‰äº targetSum çš„ è·¯å¾„ çš„æ•°ç›®ã€‚
     * è·¯å¾„ ä¸éœ€è¦ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œä¹Ÿä¸éœ€è¦åœ¨å¶å­èŠ‚ç‚¹ç»“æŸï¼Œä½†æ˜¯è·¯å¾„æ–¹å‘å¿…é¡»æ˜¯å‘ä¸‹çš„ï¼ˆåªèƒ½ä»çˆ¶èŠ‚ç‚¹åˆ°å­èŠ‚ç‚¹ï¼‰ã€‚
     * */
//    private int resultCount = 0;
//    private int oldTarget = 0;
//    public int pathSum(TreeNode root, int targetSum) {
//        if (root == null) return resultCount;
//        oldTarget = targetSum;
//        fromThisNode(root);
//        return resultCount;
//    }
//    private void currentTarget(TreeNode root, int targetSum) {
//        if (root == null) return;
//        if (root.val == targetSum) resultCount++;
//        currentTarget(root.left, targetSum - root.val);
//        currentTarget(root.right, targetSum - root.val);
//    }
//    private void fromThisNode(TreeNode root) {
//        if (root == null) return;
//        if (root.val == oldTarget) resultCount++;
//        fromThisNode(root.left);
//        fromThisNode(root.right);
//        currentTarget(root.left, oldTarget - root.val);
//        currentTarget(root.right, oldTarget - root.val);
//    }

    /**
     * è¿™é“é¢˜éœ€è¦æˆ‘ä»¬å¯¹è¿‡ç¨‹æœ‰æ›´æ·±åˆ»çš„ç†è§£
     *
     * å½“é¢˜ç›®å¤„åœ¨ä¸€ä¸ªå¤šå˜çš„æ¡ä»¶ä¸­ï¼Œæˆ‘ä»¬è¦ä»ç¡®å®šçš„ä¸œè¥¿å¼€å§‹
     * é¢˜ç›®çœ‹èµ·æ¥è·¯å¾„ä¸ä»æ ¹èŠ‚ç‚¹å¼€å§‹äº†ï¼Œä½†å®é™…è§£å†³é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬è¿˜æ˜¯å½“ä½œä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œåªæ˜¯æŠŠæ¯ä¸ªèŠ‚ç‚¹éƒ½å½“æˆæ ¹èŠ‚ç‚¹
     * åœ¨è¿™é“é¢˜ç›®ä¸­è·¯å¾„æ˜¯æ¯”è¾ƒéšæ„çš„ï¼Œä½†æˆ‘ä»¬å¯ä»¥å®šä¸‹è·¯å¾„çš„èµ·ç‚¹ï¼Œé€šè¿‡è·¯å¾„çš„èµ·ç‚¹è¿›è¡Œåˆ†æƒ…å†µè®¨è®º
     * å¯¹äºä¸€æ£µæ ‘ï¼Œè·¯å¾„çš„èµ·ç‚¹æ— éåœ¨ï¼š1 æ ¹èŠ‚ç‚¹ï¼Œæˆ–è€… 2 å·¦æ ‘çš„æŸä¸ªèŠ‚ç‚¹ï¼Œæˆ–è€… 3 å³æ ‘çš„æŸä¸ªèŠ‚ç‚¹
     *
     * å¯¹äº 2 è¿™ç§æƒ…å†µï¼Œç»“æœä¸º pathSum(root.left, sum)ï¼Œå³æŠŠå·¦æ ‘å¸¦åˆ°è¿™ä¸ªå‡½æ•°ä¸­å³å¯
     * è¿™å°±æ˜¯å¯¹è¿‡ç¨‹çš„æŠ½è±¡ï¼Œç›¸ä¿¡è¿‡ç¨‹ï¼ŒæŠŠç»“æœäº¤ç»™è¿‡ç¨‹
     * 3 è¿™ç§æƒ…å†µäº¦ç„¶
     *
     * æ‰€ä»¥é—®é¢˜å°±å˜æˆäº†ï¼Œæ ¹èŠ‚ç‚¹ä¸ºèµ·ç‚¹ï¼Œæ‰¾æœ‰å¤šå°‘ä¸ªç¬¦åˆæ¡ä»¶çš„è·¯å¾„ï¼Œå³æˆ‘ä»¬è¦å†™çš„å‡½æ•°ï¼š
     * private int pathSumStartWithRoot(TreeNode root, int sum)
     * å†™è¿™ä¸ªå‡½æ•°å¹¶ä¸éš¾ï¼Œæ¯æ¬¡æ ¹æ® val å‡ target çš„å€¼å³å¯
     * è¿™é‡Œæ³¨æ„çš„æ˜¯ï¼Œå³ä½¿å¯¹äº†ï¼Œä¹Ÿä¸è¦åœï¼ˆä¸è¦å¿™ç€ returnï¼‰æ¯”å¦‚ 1->(-2) å¯¹äº†, ç»§ç»­å‘ä¸‹å¯èƒ½æœ‰ 1->(-2)->(-1)->1 è¿™ç§æƒ…å†µï¼Œå‰é¢å¯¹çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªå°±ä¹Ÿæ˜¯å¯¹çš„
     * */
    public int pathSum(TreeNode root, int sum) {
        if (root == null) return 0;
        int ret = pathSumStartWithRoot(root, sum) + pathSum(root.left, sum) + pathSum(root.right, sum);
        return ret;
    }

    private int pathSumStartWithRoot(TreeNode root, int sum) {
        if (root == null) return 0;
        int ret = 0;
        if (root.val == sum) ret++;
        ret += pathSumStartWithRoot(root.left, sum - root.val) + pathSumStartWithRoot(root.right, sum - root.val);
        return ret;
    }
    /**
     * æ›´å¤šçš„å»ä½“ä¼šå‡½æ•°çš„æ„æ€ï¼Œä¸è¦é™·åœ¨å‡½æ•°çš„å…·ä½“å®ç°ä¸­ï¼Œè¦ä½“ä¼šå‡½æ•°æŠ½è±¡çš„æ„ä¹‰ï¼Œä½“ä¼šæŠ½è±¡èƒŒåçš„é€»è¾‘
     * */
    //leetcodeæµ‹è¯•ä¸­ï¼Œæˆ‘çš„æ–¹æ³•å’Œå¤§ç¥çš„æ–¹æ³•è¿è¡Œé€Ÿåº¦å’Œå†…å­˜æ¶ˆè€—å¹¶æ²¡æœ‰å¾ˆå¤§åŒºåˆ«ï¼ˆç”šè‡³æˆ‘å†™çš„å†—ä½™çš„ä»£ç è¿˜ç•¥å¿«2msï¼‰
    /**
     * ä¼˜åŒ–ï¼š
     *      å¯ä»¥çœ‹åˆ°æ¯ä¸ªèŠ‚ç‚¹ä¸æ­¢åˆ«éå†äº†ä¸€éï¼Œæ‰€ä»¥è¿™ç»ä¸æ˜¯æœ€ä½³çš„è§£æ³•ï¼Œç›¸åï¼Œè¿™æ˜¯ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦æ¯”è¾ƒé«˜çš„è§£æ³•
     *      æˆ‘ä»¬å¯ä»¥ç²—ç•¥çš„è®¤ä¸ºæ¯ä¸ªèŠ‚ç‚¹éƒ½è¢«å½“æˆèµ·ç‚¹å»éå†äº†å…¶ä»–çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦æ˜¯ n ä¹˜ nï¼Œå³å¹³æ–¹çš„å¤æ‚åº¦ï¼ˆç²—ç•¥è®¡ç®—ï¼‰
     *      æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿå°½åŠ›ä¼˜åŒ–åˆ°æ¯ä¸ªç‚¹åªéå†ä¸€æ¬¡ï¼Œè¿™ç§æœ€ä¼˜æƒ…å†µ
     * */

```

ä¼˜åŒ–ï¼Œé¦–å…ˆè§£é‡Šå‰ç¼€å’Œï¼š

![image-20220521163424920](6-JavaNote-Tree.assets/image-20220521163424920.png)

```java
/**
     * è¿™é‡Œæåˆ°ä¸€ç§å« å‰ç¼€å’Œ çš„æ–¹æ³•ï¼ˆprefixï¼‰
     * https://leetcode-cn.com/problems/path-sum-iii/solution/dui-qian-zhui-he-jie-fa-de-yi-dian-jie-s-dey6/
     *
     * ä¸€ä¸ªèŠ‚ç‚¹çš„å‰ç¼€å’Œå°±æ˜¯è¯¥èŠ‚ç‚¹åˆ°æ ¹ä¹‹é—´çš„è·¯å¾„å’Œ
     *
     * é¢˜ç›®è¦æ±‚çš„æ˜¯æ‰¾å‡ºè·¯å¾„å’Œç­‰äºç»™å®šæ•°å€¼çš„è·¯å¾„æ€»æ•°, è€Œ:
     * ä¸¤èŠ‚ç‚¹é—´çš„è·¯å¾„å’Œ = ä¸¤èŠ‚ç‚¹çš„å‰ç¼€å’Œä¹‹å·®
     *
     * å½“æˆ‘ä»¬è®¨è®ºä¸¤ä¸ªèŠ‚ç‚¹çš„å‰ç¼€å’Œå·®å€¼æ—¶ï¼Œæœ‰ä¸€ä¸ªå‰æï¼š
     * ä¸€ä¸ªèŠ‚ç‚¹å¿…é¡»æ˜¯å¦ä¸€ä¸ªèŠ‚ç‚¹çš„ç¥–å…ˆèŠ‚ç‚¹
     *
     * ç†è§£äº†è¿™ä¸ªä¹‹åï¼Œé—®é¢˜å°±å¾—ä»¥ç®€åŒ–ï¼š
     * æˆ‘ä»¬åªç”¨éå†æ•´é¢—æ ‘ä¸€æ¬¡ï¼Œè®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„å‰ç¼€å’Œï¼Œå¹¶æŸ¥è¯¢è¯¥èŠ‚ç‚¹çš„ç¥–å…ˆèŠ‚ç‚¹ä¸­ç¬¦åˆæ¡ä»¶çš„ä¸ªæ•°ï¼Œå°†è¿™ä¸ªæ•°é‡åŠ åˆ°æœ€ç»ˆç»“æœä¸Šã€‚
     *
     * å³ä¿è¯é•¿çš„é‚£æ¡è·¯å¾„åŒ…æ‹¬çŸ­çš„é‚£æ¡è·¯å¾„
     * ç”¨å…ˆåºéå†çš„æ–¹æ³•ï¼Œèƒ½ä¿è¯å½“éå†åˆ°ä¸€ä¸ªèŠ‚ç‚¹ X æ—¶ï¼Œä¹‹å‰éå†çš„èŠ‚ç‚¹ B ä¸€å®šåœ¨è·¯å¾„ OX ä¸­ï¼Œè¿™é‡Œçš„ O æŒ‡çš„æ˜¯æ ¹èŠ‚ç‚¹
     * æ³¨æ„è¿™é‡Œä¼šæœ‰å¾ˆé‡è¦çš„ä¸€ä¸ªæ“ä½œï¼Œå°±æ˜¯éå†å®Œè‡ªå·±ä¹Ÿéå†å®Œå·¦å­æ ‘å³å­æ ‘åï¼ŒæŠŠè‡ªå·±å»é™¤æ‰
     * è¿™ä¸ªå»é™¤çš„åŠ¨ä½œè‡³å…³é‡è¦ï¼Œå¯ä»¥ä¿è¯è¿™é‡Œçš„æ“ä½œä¸å½±å“å¦ä¸€ä¸ªå­æ ‘ä¸Šçš„æ“ä½œ
     * (å³å½“æˆ‘ä»¬è¦éå†5ï¼Œ9è¿™ä¸ªå­æ ‘æ—¶ï¼Œè¦æŠŠ Map ä¸­è®°å½•çš„ 4ï¼Œ7ï¼Œ8è¿™éƒ¨åˆ†å­æ ‘çš„æƒ…å†µéƒ½åˆ æ‰)
     * */
    private int oldTarget = 0;
    private Map<Integer, Integer> prefixMap = new HashMap<>();
    public int pathSum4(TreeNode root, int sum) {
        if (root == null) return 0;
        oldTarget = sum;
        prefixMap.put(0, 1);
        return dfs(root, 0);
    }
    private int dfs(TreeNode root, int currentSum) {
        int result = 0;
        if (root == null) return result;
        currentSum += root.val;
        int here = prefixMap.getOrDefault(currentSum - oldTarget, 0); // è¿™ä¸ª here å¾ˆç²¾é«“ï¼ŒæŒ‡çš„æ˜¯åœ¨è¿™é‡Œç»“æŸ
        prefixMap.put(currentSum, prefixMap.getOrDefault(currentSum, 0) + 1); // æŠŠè‡ªå·±è¿™é‡Œçš„å‰ç¼€å’Œ put è¿›å»
        int left = dfs(root.left, currentSum); // åœ¨å·¦æ ‘ä¸Šç»“æŸæœ‰å¤šå°‘å¯èƒ½çš„è·¯å¾„
        int right = dfs(root.right, currentSum); // åœ¨å³æ ‘ä¸Šç»“æŸæœ‰å¤šå°‘å¯èƒ½çš„è·¯å¾„
        result = here + left + right; // ä¸‰ç§æƒ…å†µçš„å¯èƒ½è·¯å¾„æ•°åŠ ä¸€èµ·
        prefixMap.put(currentSum, prefixMap.get(currentSum) - 1); // å»é™¤åœ¨è‡ªå·±è¿™é‡Œç»“æŸçš„è¿™ç§æƒ…å†µ
        return result;
    }
    // ä½“éªŒ dfs æ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œä½“éªŒå…ˆåºéå†
```



## ç›¸åŒèŠ‚ç‚¹å€¼çš„æœ€å¤§è·¯å¾„é•¿åº¦ 687 Longest Univalue Path 

```
             1
            / \
           4   5
          / \   \
         4   4   5

Output : 2
```

åæ€ä¸€ä¸‹è¿™é“é¢˜

```java
private int path = 0;

public int longestUnivaluePath(TreeNode root) {
    dfs(root);
    return path;
}

private int dfs(TreeNode root){
    if (root == null) return 0;
    int left = dfs(root.left);
    int right = dfs(root.right);
    int leftPath = root.left != null && root.left.val == root.val ? left + 1 : 0;
    int rightPath = root.right != null && root.right.val == root.val ? right + 1 : 0;
    path = Math.max(path, leftPath + rightPath);
    return Math.max(leftPath, rightPath);
}
```

æœ¬é¢˜å±äºï¼šæ ‘ã€dfs ç±»å‹çš„é¢˜ç›®

* å…¨å±€å˜é‡ pathï¼šé¦–å…ˆæœ¬é¢˜è¦æ‰¾åˆ°æœ€å¤§é•¿åº¦çš„è¯ï¼Œä»åšé¢˜çš„è§’åº¦ï¼Œæ˜¾ç„¶ç”¨ä¸€ä¸ªå…¨å±€å˜é‡æ¥è®°å½•ä¼šæ¯”è¾ƒç®€åŒ–æ€ç»´ï¼Œå¦‚æœç”¨è¿”å›å€¼çš„è¯ï¼Œä¼šä½¿å‡½æ•°å˜å¾—å¤æ‚ï¼Œå‡½æ•°çš„è¿”å›å€¼æˆ‘ä»¬æœ‰å…¶ä»–ç”¨å¤„ï¼Œä¸ä¸€å®šè¿”å›å€¼å°±ä¸€å®šæ˜¯é¢˜ç›®çš„ç­”æ¡ˆ
* DFSï¼šå¼€å§‹DFSï¼ŒDFS çš„åŸºæœ¬åŸç†å°±æ˜¯ dfs(root) é‡Œé¢ä¼šæœ‰ dfs(root.left) å’Œ dfs(root.right)ï¼Œè¿™é‡Œçš„ dfs è¿”å›çš„å…¶å®æ˜¯ä»è¿™ä¸ªèŠ‚ç‚¹å‘ä¸‹æœ€é•¿çš„ä¸€ä¸ªè·¯å¾„æœ‰å¤šé•¿ï¼Œä½†æ˜¯åœ¨ç®—è¿™äº›ä¸œè¥¿çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿç®—äº†å·¦å³çš„æ±‚å’Œï¼Œè¿™ä¸ªæ±‚å’Œçš„å€¼ä¼šå’Œæœ€ç»ˆç­”æ¡ˆpathæ¯”è¾ƒï¼Œä¿ç•™æœ€é•¿çš„ä¸€ä¸ªã€‚æ‰€ä»¥ DFS è¿™ä¸ªå‡½æ•°æ˜¯æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼š
  1. ä»¥è¿™ä¸ª root ä¸ºæ ¹èŠ‚ç‚¹ï¼Œæ‰¾ä¸€ä¸ªå·¦å³éƒ½æœ‰çš„è·¯å¾„ï¼Œè®°å½•è¿™ä¸ªè·¯å¾„çš„é•¿åº¦å¹¶å’Œæœ€ç»ˆç»“æœæ¯”è¾ƒæ›´æ–°ï¼Œè¿™ä¸ªåŠŸèƒ½é€šè¿‡å…¨å±€å˜é‡å®ç°ã€‚
  2. ä»¥è¿™ä¸ª root ä¸ºæ ¹èŠ‚ç‚¹ï¼Œæ‰¾åˆ°å·¦å³ä¸¤è¾¹é‚£è¾¹çš„è·¯å¾„æ›´é•¿ï¼Œå¹¶è¿”å›è¿™ä¸ªæ›´é•¿çš„å•è¾¹çš„è·¯å¾„ã€‚
* å…³äºåˆ¤æ–­ç©ºï¼Œåˆ¤æ–­å¶å­èŠ‚ç‚¹ç­‰ç­‰ï¼Œå…¶å®è¿™äº›æƒ…å†µä¸ç”¨è€ƒè™‘è¿™ä¸ªä¹ˆå¤šï¼Œæœ€é‡è¦çš„æ˜¯æœ‰ç©ºçš„æ—¶å€™çš„å¤„ç†å°±å¥½ã€‚

# é—®é¢˜åˆ†ç±»ï¼šäºŒå‰æ ‘çš„è·¯å¾„é—®é¢˜

